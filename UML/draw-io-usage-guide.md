# draw.ioファイル使用ガイド

## 作成済みファイル
- `Fullsystem.drawio` - Mermaidから変換されたシステム構成図

## draw.ioでの開く方法

### 1. オンライン版で開く
1. https://app.diagrams.net/ にアクセス
2. 「既存の図を開く」を選択
3. 「デバイス」を選択
4. `Fullsystem.drawio` ファイルを選択

### 2. VS Code拡張機能で開く
1. VS Codeに「Draw.io Integration」拡張機能をインストール
2. `Fullsystem.drawio` ファイルをVS Codeで開く
3. 自動的にdraw.ioエディタが起動

## 図の構成

### レイヤー構造（上から下、左から右）
```
[フロントエンド層]     [API Gateway層]
[ビジネスロジック層]   [データアクセス層]
[データベース層]       [外部サービス]
```

### 色分け
- **フロントエンド層**: 水色 (#e1f5fe)
- **API Gateway層**: 薄紫 (#f3e5f5)
- **ビジネスロジック層**: 薄緑 (#e8f5e8)
- **データアクセス層**: 緑 (#c8e6c9)
- **データベース層**: 濃い緑 (#a5d6a7)
- **外部サービス**: 黄色 (#ffecb3)

## カスタマイズ方法

### 新しいコンポーネントを追加する場合
1. 適切な層のコンテナ内に図形を追加
2. 図形のスタイルを層の色に合わせる
3. 必要な接続線を追加

### スタイルの変更
1. 要素を選択
2. 右側のスタイルパネルで色、フォント、線の太さなどを調整
3. 「スタイルをコピー」機能で統一感を保つ

### レイアウトの調整
1. 要素をドラッグして位置を調整
2. 「整列」機能で要素を綺麗に配置
3. 「配布」機能で要素間の間隔を均等にする

## エクスポート

### 画像として保存
1. ファイル → エクスポート → PNG/JPEG/SVG
2. 解像度とサイズを設定
3. エクスポート実行

### PDFとして保存
1. ファイル → エクスポート → PDF
2. ページサイズと方向を設定
3. エクスポート実行

## 接続関係の説明

### 主要な接続
- フロントエンド層内：FE1が他のコンポーネントを統制
- API Gateway → ビジネスロジック層：全4つのBLコンポーネントへ
- ビジネスロジック → データアクセス：機能別の適切な接続
- データアクセス → データベース：主にDA1からDB1へのSQL/REST接続
- 外部サービス：HTTP/HTTPS接続でそれぞれの外部APIへ

### ラベル付き接続
- `SQL/REST`: DA1 → DB1
- `HTTP`: DA2 → EXT1, BL2 → EXT2
- `HTTPS`: FE4 → EXT3

## 保守・更新時の注意点

1. **一貫性の維持**: 新しい要素を追加する際は、既存の命名規則と色分けに従う
2. **接続の明確化**: 新しい接続を追加する際は、適切なラベルを付ける
3. **レイアウトの最適化**: 定期的に全体のレイアウトを見直し、見やすさを確保する
4. **バックアップ**: 重要な変更前には必ずファイルのバックアップを作成する

## トラブルシューティング

### ファイルが開けない場合
- ファイルの拡張子が `.drawio` であることを確認
- ブラウザのキャッシュをクリア
- 別のブラウザで試行

### レイアウトが崩れた場合
- 「元に戻す」機能（Ctrl+Z）を使用
- 「自動レイアウト」機能を試行
- 手動で要素の位置を調整
