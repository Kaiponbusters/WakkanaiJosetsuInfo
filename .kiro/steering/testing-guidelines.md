---
inclusion: fileMatch
fileMatchPattern: "*.test.ts"
---

# テスト作成ガイドライン

## テストファイル作成時の必須事項

### テスト構造
- `describe`、`it`、`expect`を使用したBDD形式でテストを記述する
- テストの説明は日本語で記述し、何をテストしているかを明確にする
- `beforeEach`、`afterEach`を適切に使用してテスト環境をクリーンアップする

### モック作成
- 外部依存関係（API、composables等）は必ずモックする
- モックデータは実際のデータ構造に近い形で作成する
- `vi.mock()`を使用してモジュール全体をモックする

### Vue コンポーネントテスト
- `@vue/test-utils`の`mount`を使用してコンポーネントをマウントする
- `Teleport`コンポーネントを使用している場合は適切にスタブする
- ユーザーインタラクション（クリック、入力等）をテストに含める
- `$nextTick()`を使用して非同期更新を待つ

### アサーション
- 期待値と実際の値を明確に区別する
- エラーメッセージが分かりやすくなるようにアサーションを記述する
- 境界値やエッジケースもテストに含める

### カバレッジ
- 主要な機能パスは必ずテストする
- エラーハンドリングのパスもテストに含める
- 条件分岐は両方のパスをテストする